---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/baselayout.astro';

const posts = (await getCollection('writing')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

const pageTitle = "Writing";
---

<BaseLayout pageTitle={pageTitle}>
  <p>Long-form essays and thoughts.</p>
  <ul class="post-list">
    {posts.map((post) => (
      <li>
        <span class="date">{post.data.pubDate.toISOString().slice(0, 10)}</span>
        <a href={`/writing/${post.slug}/`}>{post.data.title}</a>
      </li>
    ))}
  </ul>
</BaseLayout>

<style>
  .post-list {
    list-style: none;
    padding: 0;
    margin-top: 2rem;
  }
  .post-list li {
    display: flex;
    flex-direction: column;
    margin-bottom: 1.5rem;
  }
  .post-list .date {
    font-size: 0.875rem;
    color: var(--color-muted);
    margin-bottom: 0.25rem;
  }
  @media (min-width: 640px) {
    .post-list li {
      flex-direction: row;
      align-items: baseline;
    }
    .post-list .date {
      width: 120px;
      flex-shrink: 0;
      margin-bottom: 0;
    }
  }
</style>